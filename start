#!/bin/bash

# Start Ollama if not already running
if ! pgrep -x "ollama" > /dev/null; then
    echo "Starting Ollama..."
    ollama serve &
    OLLAMA_PID=$!
    sleep 2
else
    echo "Ollama is already running"
fi

# Start FastAPI backend
echo "Starting FastAPI backend..."
cd "$(dirname "$0")/backend" || exit

# Activate virtual environment if it exists
if [ -f "venv/bin/activate" ]; then
    source venv/bin/activate
fi

python main.py
